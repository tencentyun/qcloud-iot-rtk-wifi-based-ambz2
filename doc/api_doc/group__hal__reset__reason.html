<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>SDK7.1: Reset Reason HAL API</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">SDK7.1
   </div>
   <div id="projectbrief">This document shows Ameba SDK 7.1 APIs</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Reset Reason HAL API</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gae23194caaa2c58579dbf88f91e82fafa"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__hal__reset__reason.html#ga32c52fba5cbe3587573924464bebb6a5">reset_reason_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__hal__reset__reason.html#gae23194caaa2c58579dbf88f91e82fafa">hal_reset_reason_get</a> (void)</td></tr>
<tr class="separator:gae23194caaa2c58579dbf88f91e82fafa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gacbff6737d084c60f0edafe76e1513cbf"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__hal__reset__reason.html#gacbff6737d084c60f0edafe76e1513cbf">hal_reset_reason_get_raw</a> (void)</td></tr>
<tr class="separator:gacbff6737d084c60f0edafe76e1513cbf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5e74746137d9f4c2f7042f395029b2e7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__hal__reset__reason.html#ga5e74746137d9f4c2f7042f395029b2e7">hal_reset_reason_clear</a> (void)</td></tr>
<tr class="separator:ga5e74746137d9f4c2f7042f395029b2e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9ca924b7e2c81c06aa52a45dee5f67f3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__hal__reset__reason.html#ga9ca924b7e2c81c06aa52a45dee5f67f3">hal_reset_reason_set</a> (<a class="el" href="group__hal__reset__reason.html#ga32c52fba5cbe3587573924464bebb6a5">reset_reason_t</a> reason)</td></tr>
<tr class="separator:ga9ca924b7e2c81c06aa52a45dee5f67f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a class="anchor" id="ga32c52fba5cbe3587573924464bebb6a5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__hal__reset__reason.html#ga32c52fba5cbe3587573924464bebb6a5">reset_reason_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Definitions of different reset reasons </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a class="anchor" id="gga32c52fba5cbe3587573924464bebb6a5ada124c1d34967b057a527ef5ada6031b"></a>RESET_REASON_POWER_ON&#160;</td><td class="fielddoc">
<p>Set when power is initially applied to the board. The power-on-reset circuit causes a POWER_ON reset when this occurs </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="gga32c52fba5cbe3587573924464bebb6a5a33d0774dd4d8397351daae146c2aa6d8"></a>RESET_REASON_PIN_RESET&#160;</td><td class="fielddoc">
<p>Set when a reset is triggered by the hardware pin on the board </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="gga32c52fba5cbe3587573924464bebb6a5a9c3aa2903688021f90ad0f412b11f64c"></a>RESET_REASON_BROWN_OUT&#160;</td><td class="fielddoc">
<p>Triggered when the voltage drops below the low voltage detect (LVD) threshold the system will be held in a reset until the voltage rises above the threshold </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="gga32c52fba5cbe3587573924464bebb6a5a21446a77a6a693c3b14c53a2cb3792e3"></a>RESET_REASON_SOFTWARE&#160;</td><td class="fielddoc">
<p>Set during software reset, typically triggered by writing the SYSRESETREQ bit in the Application Interrupt and Reset Control register </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="gga32c52fba5cbe3587573924464bebb6a5ac37af56a7f03bae0beade7587608975f"></a>RESET_REASON_WATCHDOG&#160;</td><td class="fielddoc">
<p>Set when a running watchdog timer fails to be refreshed </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="gga32c52fba5cbe3587573924464bebb6a5ac5161719ceba3a2532df84edf0d74516"></a>RESET_REASON_WAKE_LOW_POWER&#160;</td><td class="fielddoc">
<p>Set when waking from deep sleep mode </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="gga32c52fba5cbe3587573924464bebb6a5a926110ecba102ed47d7ccc07934dd63b"></a>RESET_REASON_MULTIPLE&#160;</td><td class="fielddoc">
<p>Set if multiple reset reasons are set within the board. Occurs when the reset reason registers aren't cleared between resets </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="gga32c52fba5cbe3587573924464bebb6a5ae6bc7791925f720a2ddc758330029cc0"></a>RESET_REASON_UNKNOWN&#160;</td><td class="fielddoc">
<p>Unknown or unreadable reset reason </p>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga5e74746137d9f4c2f7042f395029b2e7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void hal_reset_reason_clear </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Clear the reset reason from registers</p>
<p>Reset the value of the reset status registers, the reset reason will persist between system resets on certain platforms so the registers should be cleared before the system resets. Failing to do so may make it difficult to determine the cause of any subsequent system resets. </p>

</div>
</div>
<a class="anchor" id="gae23194caaa2c58579dbf88f91e82fafa"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__hal__reset__reason.html#ga32c52fba5cbe3587573924464bebb6a5">reset_reason_t</a> hal_reset_reason_get </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Fetch the reset reason for the last system reset</p>
<p>This function must return the contents of the system reset reason registers cast to an appropriate platform independent reset reason. If multiple reset reasons are set this function should return RESET_REASON_MULTIPLE. If the reset reason does not match any existing platform independent value this function should return RESET_REASON_PLATFORM. If no reset reason can be determined this function should return RESET_REASON_UNKNOWN.</p>
<p>This function is not idempotent, there is no guarantee that the system reset reason will not be cleared between calls to this function altering the return value between calls.</p>
<p>Note: Some platforms contain reset reason registers that persist through system resets. If the registers haven't been cleared before calling this function multiple reasons may be set within the registers. If multiple reset reasons are detected this function will return RESET_REASON_MULTIPLE.</p>
<dl class="section return"><dt>Returns</dt><dd>enum containing the last reset reason for the board. </dd></dl>

</div>
</div>
<a class="anchor" id="gacbff6737d084c60f0edafe76e1513cbf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t hal_reset_reason_get_raw </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Fetch the raw platform specific reset reason register value</p>
<p>This function must return the raw contents of the system reset reason registers cast to a uint32_t value. If the platform contains reset reasons that span multiple registers/addresses the value should be concatenated into the return type.</p>
<p>This function is not idempotent, there is no guarantee that the system reset reason will not be cleared between calls to this function altering the return value between calls.</p>
<dl class="section return"><dt>Returns</dt><dd>value containing the reset reason register for the given platform. If the platform contains reset reasons across multiple registers they will be concatenated here. </dd></dl>

</div>
</div>
<a class="anchor" id="ga9ca924b7e2c81c06aa52a45dee5f67f3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void hal_reset_reason_set </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__hal__reset__reason.html#ga32c52fba5cbe3587573924464bebb6a5">reset_reason_t</a>&#160;</td>
          <td class="paramname"><em>reason</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set the reset reason to registers</p>
<p>Set the value of the reset status registers, to let user applicatoin store the reason before doing reset. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
